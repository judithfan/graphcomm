<!DOCTYPE html>
<html>
<head>
<title> Simple </title>
<script src="bower_components/paper/dist/paper-full.js"></script>
<script src="node_modules/requirejs/require.js"></script>
<script type="text/javascript">
	paper.install(window);
	window.onload = function() {

		paper.setup('myCanvas');
		// Create a simple drawing tool:
		var tool = new Tool();
		tool.minDistance = 10;
		var path, path2;			

		// Define a mousedown and mousedrag handler
		tool.onMouseDown = function(event) {
			path = new Path();			
			path.strokeColor = 'black';
			path.strokeWidth = 5;
			path.add(event.point);
			path.fullySelected = true;

			path2 = new Path();
			path2.strokeColor = 'black';
			path2.strokeWidth = 5;

		}

		tool.onMouseDrag = function(event) {
			path.add(event.point);
		}

		tool.onMouseUp = function(event) {
			path.selected = false;
			path.smooth(10);
			console.log(path.length);
			norm = path.getNormalAt(path.length).multiply(100);
			console.log(norm);
			finalPoint = path._segments.slice(-1)[0];
			path2.add(finalPoint['point'].add(-norm));
			path2.add(finalPoint['point']);
   			path2.add(finalPoint['point'].add(norm));

			function eG(t,m,s) { // eG = evaluateGaussian
			    val = 1/(s*Math.sqrt(2*Math.PI)) * Math.exp(- Math.pow(m-t,2)/(2 * Math.pow(s,2)));
			    return val;
			}

		    function gS(t,s) { // gS = genStops
		        n = eG(0,0,s);
		        c = 1 - eG(t,0,s)/n;
		        var s = new Color(c,c,c);
		        // console.log(c);
		        return s;
		    }

		    path2.strokeColor = {
		        gradient: {
		            stops: [[gS(-4,1), 0], [gS(-3,1), 0.125], [gS(-2,1), 0.25],[gS(-1,1), 0.375],
		                    [gS(0,1), 0.5], [gS(1,1), 0.625], [gS(2,1), 0.75],[gS(3,1), 0.875],[gS(4,1), 1]],
		            radial: false
		        },
		        origin: finalPoint['point']-norm,
		        destination: finalPoint['point']+norm
		    };

   			// console.log(path2._segments);
   			// paper.view.draw();
		}
	}
</script>
</head>
<body>
	<canvas id="myCanvas" width = 800 height= 800></canvas>
</body>
</html>